# PowerDNS Recursor configuration
# Listens on all interfaces for DNS on port 53 inside the container
local-address=0.0.0.0

# Optional: built-in web server for stats (disabled in prod)
webserver=no
webserver-address=127.0.0.1
webserver-port=8082
webserver-allow-from=127.0.0.1/32

# Performance / cache defaults
max-cache-entries=500000
max-negative-ttl=60
max-cache-ttl=3600

# Security and recursion behavior (restrict to RFC1918 + loopback)
allow-from=127.0.0.1/32,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
permit-small-ttls=yes

# Do not forward by default; use root servers
# forward-zones=

# DNSSEC Configuration
dnssec=validate
dnssec-log-bogus=yes
dnssec-disabled-algorithms=

# Root trust anchors (automatically maintained)
trust-anchors-file=/etc/powerdns/trust-anchors.conf

# DNSSEC validation settings
max-bogus-ttl=3600
max-cache-bogus-ttl=60

# Logging for DNSSEC validation
loglevel=4
log-common-errors=yes
quiet=no
